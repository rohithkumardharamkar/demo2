<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>My Company Portal</title>
</head>
<body>
<h1>Welcome to My Company Portal</h1>
 
  <p id="status">Checking login...</p>
 
  <p>
<a href="/.auth/login/aad">Sign In</a> |
<a href="/.auth/logout?post_logout_redirect_uri=/">Sign Out</a>
</p>
 
  <p>
<a href="/admin.html">Admin Area</a>
</p>
 
  <script>
    async function checkLogin() {
      try {
        const res = await fetch("/.auth/me");
        const data = await res.json();
        const user = data.clientPrincipal;
 
        if (user) {
          document.getElementById("status").textContent =
            `Signed in as ${user.userDetails}`;
 
          if (user.userRoles && user.userRoles.length > 0) {
            const roles = user.userRoles.join(", ");
            const el = document.createElement("p");
            el.textContent = "Your roles: " + roles;
            document.body.appendChild(el);
          }
        } else {
          document.getElementById("status").textContent = "Not signed in";
        }
      } catch (err) {
        document.getElementById("status").textContent = "Not signed in";
      }
    }
 
    checkLogin();
</script>
</body>
</html>
