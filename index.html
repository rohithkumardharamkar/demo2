<!DOCTYPE html>
<html>
<head>
  <title>My Company Portal</title>
</head>
<body>
  <h1>Welcome to My Company Portal</h1>

  <p id="status">Checking login...</p>

  <p>
    <a href="/.auth/login/aad">Sign In</a> |
    <a href="/.auth/logout">Sign Out</a>
  </p>

  <p>
    <a href="/admin.html">Admin Area</a>
  </p>

  <script>
    fetch("/.auth/me")
      .then(res => res.json())
      .then(data => {
        if (data && data[0]) {
          const user = data[0];
          document.getElementById("status").textContent =
            `Signed in as ${user.userDetails}`;

          // Display assigned roles if available
          if (user.userRoles) {
            const roles = user.userRoles.join(", ");
            const el = document.createElement("p");
            el.textContent = "Your roles: " + roles;
            document.body.appendChild(el);
          }
        } else {
          document.getElementById("status").textContent = "Not signed in";
        }
      })
      .catch(() => {
        document.getElementById("status").textContent = "Not signed in";
      });
  </script>
</body>
</html>
